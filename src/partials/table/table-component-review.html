<script>
  function eorIssueTable() {
    return {
      loadingEorIssue: true,
      eorIssues: null,
      eorIssueModelCcComponents: "",
      eorIssueModelEvaluationReference: "",
      eorIssueModelIssueDescription: "",
      eorIssueReviewModelAuditorReview: "",
      eorIssueReviewModelStatus: "",
      eorIssueAttachmentModelFile: null,
      eorIssueAttachmentModelFileTitle: "",
      eorIssueAttachmentModelFileDescription: "",
      eorIssueReviewAttachmentModelFile: null,
      eorIssueReviewAttachmentModelFileTitle: "",
      eorIssueReviewAttachmentModelFileDescription: "",
      eorIssueReviewerModelId: -1,
      isOpenEorIssueAddForm: false,
      isOpenEorIssueEditFormIndex: null, // null === false
      isOpenEorIssueReviewFormIndex: null, // null === false -> berlaku untuk add dan edit
      isOpenEorIssueAssignReviewerFormIndex: null, // null === false -> berlaku untuk add dan edit
      eorIssueAndEorIssueReviewFormErrors: {},
      eorIssueAndEorIssueReviewFormSubmitting: false,
      eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting: false,
      eorIssueReviewerFormSubmitting: false,
      doFetchEorIssues() {
        const id = sessionStorage.getItem("selectedEORId");
        if (!id) {
          console.error("ID EOR tidak ditemukan di sessionStorage");
          this.loaded = false;
          this.isLoadingEor = false;
          return;
        }

        this.loadingEorIssue = true;
        fetch(`${window.apiHost}/eor/${id}/issue`, {
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
        })
          .then((res) => {
            if (!res.ok) throw new Error("Gagal autentikasi atau fetch data");
            return res.json();
          })
          .then((data) => {
            this.eorIssues = data.data;
            this.loadingEorIssue = false;
          })
          .catch((error) => {
            console.error("Gagal memuat TOE:", error);
            this.loadingEorIssue = false;
          });
      },

      checkReviewerAssignmentPrivilege() {
        if (reviewerData.role === "admin") return "Admin";

        const reviewer = this.toe.reviewers.find(
          (r) => r.id === reviewerData.id,
        );
        const isLead = reviewer?.toe_reviewer_is_lead_reviewer === true;
        if (isLead) return "Lead Auditor";
        else return "User";
      },

      openEorIssueAddForm() {
        this.eorIssueAndEorIssueReviewFormErrors = {};

        this.isOpenEorIssueAddForm = true;

        this.eorIssueModelCcComponents = "";
        this.eorIssueModelEvaluationReference = "";
        this.eorIssueModelIssueDescription = "";
      },

      openEorIssueEditForm(index) {
        this.eorIssueAndEorIssueReviewFormErrors = {};

        this.eorIssueModelCcComponents = this.eorIssues[index].cc_components;
        this.eorIssueModelEvaluationReference =
          this.eorIssues[index].evaluation_reference;
        this.eorIssueModelIssueDescription =
          this.eorIssues[index].issue_description;

        this.isOpenEorIssueEditFormIndex = index;
      },

      openEorIssueAssignReviewerForm(index) {
        this.eorIssueReviewerModelId = -1;
        this.isOpenEorIssueAssignReviewerFormIndex = index;
      },

      openEorIssueReviewForm(index) {
        // berlaku untuk add dan edit
        this.eorIssueAndEorIssueReviewFormErrors = {};

        if (this.eorIssues[index].eor_issue_reviewer.eor_issue_review != null) {
          this.eorIssueReviewModelAuditorReview =
            this.eorIssues[
              index
            ].eor_issue_reviewer.eor_issue_review.reviewer_review;
          this.eorIssueReviewModelStatus =
            this.eorIssues[
              index
            ].eor_issue_reviewer.eor_issue_review.status.toString();
        } else {
          this.eorIssueReviewModelAuditorReview = "";
          this.eorIssueReviewModelStatus = "";
        }

        this.isOpenEorIssueReviewFormIndex = index;
      },

      async eorIssueAndEorIssueReviewSubmitForm(event) {
        event.preventDefault();

        this.eorIssueAndEorIssueReviewFormErrors = {};

        // tambah eor issue
        if (
          this.isOpenEorIssueAddForm === true &&
          this.isOpenEorIssueEditFormIndex === null &&
          this.isOpenEorIssueReviewFormIndex === null
        ) {
          if (
            !this.eorIssueModelCcComponents ||
            this.eorIssueModelCcComponents.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents =
              "CC Components harus diisi";
          }

          if (
            !this.eorIssueModelEvaluationReference ||
            this.eorIssueModelEvaluationReference.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference =
              "Evaluation Reference harus diisi";
          }

          if (
            !this.eorIssueModelIssueDescription ||
            this.eorIssueModelIssueDescription.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription =
              "Issue Description harus diisi";
          }

          if (Object.keys(this.eorIssueAndEorIssueReviewFormErrors).length > 0)
            return;

          this.eorIssueAndEorIssueReviewFormSubmitting = true;

          try {
            const eorId = sessionStorage.getItem("selectedEORId");
            const res = await fetch(`${window.apiHost}/eor-issue/`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
              body: JSON.stringify({
                eor_id: eorId,
                cc_components: this.eorIssueModelCcComponents,
                evaluation_reference: this.eorIssueModelEvaluationReference,
                issue_description: this.eorIssueModelIssueDescription,
              }),
            });

            const result = await res.json();
            if (!res.ok) {
              await window.swal.fire({
                text: `Gagal membuat EOR Issue: ${result.message || "Terjadi kesalahan."}`,
                icon: "error",
              });
              return;
            }

            await window.swal.fire({
              text: "EOR Issue berhasil dibuat!",
              icon: "success",
            });
            window.location.reload();
          } catch (error) {
            await window.swal.fire({
              text: "EOR Issue gagal dibuat!",
              icon: "error",
            });
            window.location.reload();
          }
        }
        // edit eor issue
        else if (
          this.isOpenEorIssueAddForm === false &&
          this.isOpenEorIssueEditFormIndex !== null &&
          this.isOpenEorIssueReviewFormIndex === null
        ) {
          if (
            !this.eorIssueModelCcComponents ||
            this.eorIssueModelCcComponents.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents =
              "CC Components harus diisi";
          }

          if (
            !this.eorIssueModelEvaluationReference ||
            this.eorIssueModelEvaluationReference.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference =
              "Evaluation Reference harus diisi";
          }

          if (
            !this.eorIssueModelIssueDescription ||
            this.eorIssueModelIssueDescription.trim() === ""
          ) {
            this.eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription =
              "Issue Description harus diisi";
          }

          if (Object.keys(this.eorIssueAndEorIssueReviewFormErrors).length > 0)
            return;

          this.eorIssueAndEorIssueReviewFormSubmitting = true;

          try {
            const id = this.eorIssues[this.isOpenEorIssueEditFormIndex].id;
            const res = await fetch(`${window.apiHost}/eor-issue/${id}`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
              body: JSON.stringify({
                cc_components: this.eorIssueModelCcComponents,
                evaluation_reference: this.eorIssueModelEvaluationReference,
                issue_description: this.eorIssueModelIssueDescription,
              }),
            });

            const result = await res.json();
            if (!res.ok) {
              await window.swal.fire({
                text: `Gagal mengedit EOR Issue: ${result.message || "Terjadi kesalahan."}`,
                icon: "error",
              });
              return;
            }

            await window.swal.fire({
              text: "EOR Issue berhasil diedit!",
              icon: "success",
            });
            window.location.reload();
          } catch (error) {
            await window.swal.fire({
              text: "EOR Issue gagal diedit!",
              icon: "error",
            });
            window.location.reload();
          }
        }
        // add/edit eor issue review
        else if (
          this.isOpenEorIssueAddForm === false &&
          this.isOpenEorIssueEditFormIndex === null &&
          this.isOpenEorIssueReviewFormIndex !== null
        ) {
          // add eor issue review
          if (
            this.eorIssues[this.isOpenEorIssueReviewFormIndex]
              .eor_issue_reviewer.eor_issue_review == null
          ) {
            if (
              !this.eorIssueReviewModelAuditorReview ||
              this.eorIssueReviewModelAuditorReview.trim() === ""
            ) {
              this.eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview =
                "Auditor Review harus diisi";
            }

            if (
              this.eorIssueReviewModelStatus.toString() != "true" &&
              this.eorIssueReviewModelStatus.toString() != "false"
            ) {
              this.eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelStatus =
                "Status harus dipilih";
            }

            if (
              Object.keys(this.eorIssueAndEorIssueReviewFormErrors).length > 0
            )
              return;

            this.eorIssueAndEorIssueReviewFormSubmitting = true;

            try {
              const id = this.eorIssues[this.isOpenEorIssueReviewFormIndex].id;
              const res = await fetch(`${window.apiHost}/eor-issue-review`, {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  Authorization: `Bearer ${token}`,
                },
                body: JSON.stringify({
                  eor_issue_id: id,
                  reviewer_review: this.eorIssueReviewModelAuditorReview,
                  status: this.eorIssueReviewModelStatus,
                }),
              });

              const result = await res.json();
              if (!res.ok) {
                await window.swal.fire({
                  text: `Gagal membuat EOR Issue Review: ${result.message || "Terjadi kesalahan."}`,
                  icon: "error",
                });
                return;
              }

              await window.swal.fire({
                text: "EOR Issue Review berhasil dibuat!",
                icon: "success",
              });
              window.location.reload();
            } catch (error) {
              await window.swal.fire({
                text: "EOR Issue Review gagal dibuat!",
                icon: "error",
              });
              window.location.reload();
            }

            // edit eor issue review
          } else if (
            this.eorIssues[this.isOpenEorIssueReviewFormIndex]
              .eor_issue_reviewer.eor_issue_review != null
          ) {
            if (
              !this.eorIssueReviewModelAuditorReview ||
              this.eorIssueReviewModelAuditorReview.trim() === ""
            ) {
              this.eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview =
                "Auditor Review harus diisi";
            }

            if (
              this.eorIssueReviewModelStatus.toString() != "true" &&
              this.eorIssueReviewModelStatus.toString() != "false"
            ) {
              this.eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelStatus =
                "Status harus dipilih";
            }

            if (
              Object.keys(this.eorIssueAndEorIssueReviewFormErrors).length > 0
            )
              return;

            this.eorIssueAndEorIssueReviewFormSubmitting = true;

            try {
              const id =
                this.eorIssues[this.isOpenEorIssueReviewFormIndex]
                  .eor_issue_reviewer.eor_issue_review.id;
              const res = await fetch(
                `${window.apiHost}/eor-issue-review/${id}`,
                {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${token}`,
                  },
                  body: JSON.stringify({
                    reviewer_review: this.eorIssueReviewModelAuditorReview,
                    status: this.eorIssueReviewModelStatus,
                  }),
                },
              );

              const result = await res.json();
              if (!res.ok) {
                await window.swal.fire({
                  text: `Gagal mengedit EOR Issue Review: ${result.message || "Terjadi kesalahan."}`,
                  icon: "error",
                });
                return;
              }

              await window.swal.fire({
                text: "EOR Issue Review berhasil diedit!",
                icon: "success",
              });
              window.location.reload();
            } catch (error) {
              await window.swal.fire({
                text: "EOR Issue Review gagal diedit!",
                icon: "error",
              });
              window.location.reload();
            }
          }
        }
      },

      async deleteEorIssue(id) {
        const confirmed = await window.swal.fire({
          text: "Apakah Anda yakin ingin menghapus EOR Issue ini?",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#1d4ed8",
          confirmButtonText: "Ya!",
          cancelButtonColor: "#dc2626",
          cancelButtonText: "Batal",
        });

        if (!confirmed.isConfirmed) return;

        this.eorIssueAndEorIssueReviewFormSubmitting = true;
        this.isOpenEorIssueEditFormIndex = -1;

        try {
          const res = await fetch(`${window.apiHost}/eor-issue/${id}`, {
            method: "DELETE",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          });

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal menghapus EOR Issue: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            return;
          }

          await window.swal.fire({
            text: "EOR Issue berhasil dihapus!",
            icon: "success",
          });
          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "EOR Issue gagal dihapus!",
            icon: "error",
          });
          window.location.reload();
        }
      },

      async addEorIssueAttachment() {
        // Validasi input
        if (
          !this.eorIssueAttachmentModelFile ||
          !this.eorIssueAttachmentModelFileTitle.trim() ||
          !this.eorIssueAttachmentModelFileDescription.trim()
        ) {
          await window.swal.fire({
            text: "Semua input (file, title, dan description) wajib diisi!",
            icon: "warning",
          });
          return;
        }

        this.eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting = true;

        try {
          const id = this.eorIssues[this.isOpenEorIssueEditFormIndex].id;
          const formData = new FormData();
          formData.append("file", this.eorIssueAttachmentModelFile);
          formData.append("title", this.eorIssueAttachmentModelFileTitle);
          formData.append(
            "description",
            this.eorIssueAttachmentModelFileDescription,
          );

          const res = await fetch(
            `${window.apiHost}/eor-issue/${id}/attachment/`,
            {
              method: "POST",
              headers: {
                Authorization: `Bearer ${token}`,
              },
              body: formData,
            },
          );

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal mengupload: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            return;
          }

          await window.swal.fire({
            text: "Attachment berhasil diupload!",
            icon: "success",
          });

          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "Attachment gagal diupload!",
            icon: "error",
          });
          window.location.reload();
        }
      },

      async deleteEorIssueAttachment(attachmentIndex) {
        const confirmed = await window.swal.fire({
          text: "Apakah Anda yakin ingin menghapus attachment ini?",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#1d4ed8",
          confirmButtonText: "Ya!",
          cancelButtonColor: "#dc2626",
          cancelButtonText: "Batal",
        });

        if (!confirmed.isConfirmed) return;

        this.eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting = true;

        try {
          const id = this.eorIssues[this.isOpenEorIssueEditFormIndex].id;
          const res = await fetch(
            `${window.apiHost}/eor-issue/${id}/attachment/${attachmentIndex}`,
            {
              method: "DELETE",
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
            },
          );

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal menghapus: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            return;
          }

          await window.swal.fire({
            text: "Attachment berhasil dihapus!",
            icon: "success",
          });

          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "Attachment gagal dihapus!",
            icon: "error",
          });
          window.location.reload();
        }
      },

      async addEorIssueReviewAttachment() {
        // Validasi input
        if (
          !this.eorIssueReviewAttachmentModelFile ||
          !this.eorIssueReviewAttachmentModelFileTitle.trim() ||
          !this.eorIssueReviewAttachmentModelFileDescription.trim()
        ) {
          await window.swal.fire({
            text: "Semua input (file, title, dan description) wajib diisi!",
            icon: "warning",
          });
          return;
        }

        this.eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting = true;

        try {
          const id =
            this.eorIssues[this.isOpenEorIssueReviewFormIndex]
              .eor_issue_reviewer.eor_issue_review.id;
          const formData = new FormData();
          formData.append("file", this.eorIssueReviewAttachmentModelFile);
          formData.append("title", this.eorIssueReviewAttachmentModelFileTitle);
          formData.append(
            "description",
            this.eorIssueReviewAttachmentModelFileDescription,
          );

          const res = await fetch(
            `${window.apiHost}/eor-issue-review/${id}/attachment/`,
            {
              method: "POST",
              headers: {
                Authorization: `Bearer ${token}`,
              },
              body: formData,
            },
          );

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal mengupload: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            return;
          }

          await window.swal.fire({
            text: "Attachment berhasil diupload!",
            icon: "success",
          });

          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "Attachment gagal diupload!",
            icon: "error",
          });
          window.location.reload();
        }
      },

      async deleteEorIssueReviewAttachment(attachmentIndex) {
        const confirmed = await window.swal.fire({
          text: "Apakah Anda yakin ingin menghapus attachment untuk review ini?",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#1d4ed8",
          confirmButtonText: "Ya!",
          cancelButtonColor: "#dc2626",
          cancelButtonText: "Batal",
        });

        if (!confirmed.isConfirmed) return;

        this.eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting = true;

        try {
          const id =
            this.eorIssues[this.isOpenEorIssueReviewFormIndex]
              .eor_issue_reviewer.eor_issue_review.id;
          const res = await fetch(
            `${window.apiHost}/eor-issue-review/${id}/attachment/${attachmentIndex}`,
            {
              method: "DELETE",
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${token}`,
              },
            },
          );

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal menghapus: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            return;
          }

          await window.swal.fire({
            text: "Attachment berhasil dihapus!",
            icon: "success",
          });

          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "Attachment gagal dihapus!",
            icon: "error",
          });
          window.location.reload();
        }
      },

      async addEorIssueReviewer(eorIssueId) {
        if (this.eorIssueReviewerModelId === -1) return;

        this.eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting = true;
        try {
          const res = await fetch(`${window.apiHost}/eor-issue-reviewer/`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
            body: JSON.stringify({
              reviewer_id: this.eorIssueReviewerModelId,
              eor_issue_id: eorIssueId,
            }),
          });

          const result = await res.json();
          if (!res.ok) {
            await window.swal.fire({
              text: `Gagal menambahkan: ${result.message || "Terjadi kesalahan."}`,
              icon: "error",
            });
            window.location.reload();
            return;
          }

          await window.swal.fire({
            text: "EOR Issue Reviewer berhasil ditambahkan!",
            icon: "success",
          });

          window.location.reload();
        } catch (error) {
          await window.swal.fire({
            text: "EOR Issue Reviewer gagal ditambahkan!",
            icon: "error",
          });
          window.location.reload();
        }
      },
    };
  }
</script>

<div
  x-data="eorIssueTable()"
  x-init="doFetchEorIssues()"
  class="overflow-hidden rounded-2xl border border-gray-200 bg-white px-5 pt-4 pb-3 dark:border-gray-800 dark:bg-white/[0.03] dark:[color-scheme:dark]"
>
  <div
    class="mb-3 flex flex-col gap-2 md:flex-row md:items-center md:justify-between"
  >
    <h3 class="text-lg font-semibold text-gray-800 dark:text-white/90">
      Component Evaluation Review of EOR Issue
    </h3>
  </div>

  <div class="w-full overflow-x-auto">
    <template x-if="loadingEorIssue">
      <p class="p-4 text-gray-500 dark:text-gray-400">Loading EOR Issue...</p>
    </template>
    <template x-if="!loadingEorIssue && eorIssues === null">
      <p class="p-4 text-gray-500 dark:text-gray-400">Error fetch data</p>
    </template>
    <template
      x-if="!loadingEorIssue && (eorIssueAndEorIssueReviewFormSubmitting || eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting || eorIssueReviewerFormSubmitting)"
    >
      <p class="p-4 text-gray-500 dark:text-gray-400">Loading...</p>
    </template>

    <!-- Header Table -->
    <form @submit="eorIssueAndEorIssueReviewSubmitForm">
      <table
        class="min-w-full table-fixed"
        x-show="!loadingEorIssue && eorIssues !== null && eorIssueAndEorIssueReviewFormSubmitting === false && eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting === false && eorIssueReviewerFormSubmitting === false"
      >
        <thead class="sticky top-0 z-10">
          <tr class="border-y border-gray-100 dark:border-gray-800">
            <th
              class="w-[40px] min-w-[40px] border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  No
                </p>
              </div>
            </th>
            <th
              class="w-[120px] min-w-[120px] border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  CC Component Elements
                </p>
              </div>
            </th>
            <th
              class="w-[160px] min-w-[160px] border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  Evaluation Reference
                </p>
              </div>
            </th>
            <th
              class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  Evaluation Issue Description
                </p>
              </div>
            </th>
            <th
              class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  Auditor Review
                </p>
              </div>
            </th>
            <th
              class="w-[40px] border border-gray-200 px-2 py-2 dark:border-gray-700"
            >
              <div class="flex items-start justify-center">
                <p
                  class="text-theme-xs font-medium text-gray-900 dark:text-gray-300"
                >
                  Status
                </p>
              </div>
            </th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
          <template x-if="eorIssues?.length > 0">
            <template x-for="(eorIssue, index) in eorIssues" :key="index">
              <tr class="align-top">
                <td
                  class="w-[40px] border border-gray-200 px-2 py-2 dark:border-gray-700"
                >
                  <div class="flex items-start justify-center">
                    <p
                      class="text-theme-sm text-gray-500 dark:text-gray-400"
                      x-text="index + 1"
                    ></p>
                  </div>
                </td>

                <td
                  class="w-[120px] min-w-[120px] border border-gray-200 px-2 py-2 dark:border-gray-700"
                >
                  <template x-if="isOpenEorIssueEditFormIndex !== index">
                    <div class="flex items-start">
                      <p
                        class="text-theme-sm font-medium text-gray-800 dark:text-white/90"
                        x-text="eorIssue.cc_components"
                      ></p>
                    </div>
                  </template>

                  <template
                    x-if="isOpenEorIssueEditFormIndex === index && eorIssueAndEorIssueReviewFormSubmitting == false"
                  >
                    <div class="flex items-start">
                      <div class="w-full px-1">
                        <label
                          class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                        >
                          CC Components Element
                        </label>
                        <input
                          type="text"
                          x-model="eorIssueModelCcComponents"
                          placeholder="Masukkan CC Components Element"
                          :class="[
                            'w-full rounded-lg px-4 py-2.5 text-sm focus:outline-none',
                            eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents ? 'border border-red-500 focus:ring-red-500/10' : 'border border-gray-300 focus:ring-gray-500/10',
                            'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700'
                          ]"
                        />
                        <p
                          x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents"
                          x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents"
                          class="text-theme-xs text-error-500 mt-1.5"
                        ></p>
                      </div>
                    </div>
                  </template>
                </td>

                <td
                  class="w-[160px] min-w-[160px] border border-gray-200 px-2 py-2 dark:border-gray-700"
                >
                  <template x-if="isOpenEorIssueEditFormIndex !== index">
                    <div class="flex flex-col items-start space-y-2">
                      <p
                        class="text-theme-sm font-medium text-gray-800 dark:text-white/90"
                        x-text="eorIssue.evaluation_reference"
                      ></p>
                    </div>
                  </template>
                  <template
                    x-if="isOpenEorIssueEditFormIndex === index && eorIssueAndEorIssueReviewFormSubmitting == false"
                  >
                    <div class="flex flex-col items-start space-y-2">
                      <div class="w-full px-1">
                        <label
                          class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                        >
                          Evaluation Reference
                        </label>
                        <textarea
                          placeholder="Masukkan Evaluation Reference"
                          rows="6"
                          type="text"
                          x-model="eorIssueModelEvaluationReference"
                          :class="[
                          'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                          eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference
                            ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                            : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                          'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                        ]"
                        ></textarea>
                        <p
                          x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference"
                          x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference"
                          class="text-theme-xs text-error-500 mt-1.5"
                        ></p>
                      </div>
                    </div>
                  </template>
                </td>

                <td
                  class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
                >
                  <template x-if="isOpenEorIssueEditFormIndex !== index">
                    <div class="flex flex-col items-start space-y-2">
                      <p
                        class="text-theme-sm font-medium text-gray-800 dark:text-white/90"
                        x-text="eorIssue.issue_description"
                      ></p>
                      <template
                        x-for="(attachment, attachmentIndex) in eorIssues[index]?.eor_issue_attachments"
                        :key="attachmentIndex"
                      >
                        <div class="mt-2 w-[280px] flex-1">
                          <label
                            class="mb-1.5 block text-sm font-medium text-gray-800 dark:text-white/90"
                            x-text="attachment?.title"
                          >
                          </label>
                          <img
                            x-show="attachment?.mime_type === 'image/png' || attachment?.mime_type === 'image/jpg' || attachment?.mime_type === 'image/jpeg' "
                            :src="window.apiHost + '/uploads/eor_issue_attachment/' + attachment?.file_uuid"
                            alt="Cover"
                            class="w-full rounded-sm border border-gray-200 dark:border-gray-800"
                          />
                          <a
                            x-show="attachment?.mime_type !== 'image/png' && attachment?.mime_type !== 'image/jpg' && attachment?.mime_type !== 'image/jpeg' "
                            :href="window.apiHost + '/uploads/eor_issue_attachment/' + attachment?.file_uuid"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-brand-600 text-theme-sm hover:underline"
                          >
                            Buka Attachment
                          </a>
                          <p
                            class="text-theme-sm mt-1 text-gray-800 dark:text-white/90"
                            x-text="attachment?.description"
                          ></p>
                        </div>
                      </template>
                      <div>
                        <button
                          type="button"
                          class="bg-brand-600 shadow-theme-xs hover:bg-brand-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                          @click="openEorIssueEditForm(index)"
                          x-show="isOpenEorIssueEditFormIndex === null && isOpenEorIssueAddForm === false && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="#ffffff"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path
                              d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"
                            ></path>
                            <polygon
                              points="18 2 22 6 12 16 8 16 8 12 18 2"
                            ></polygon>
                          </svg>
                          Edit EOR Issue
                        </button>
                        <button
                          type="button"
                          class="shadow-theme-xs inline-flex items-center gap-1.5 rounded-md bg-red-600 px-2.5 py-2 text-xs font-medium text-white transition hover:bg-red-800"
                          @click="deleteEorIssue(eorIssue.id)"
                          x-show="isOpenEorIssueEditFormIndex === null && isOpenEorIssueAddForm === false && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="#ffffff"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path
                              d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                            ></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                          </svg>
                          Hapus EOR Issue
                        </button>
                      </div>
                    </div>
                  </template>

                  <template
                    x-if="isOpenEorIssueEditFormIndex === index && eorIssueAndEorIssueReviewFormSubmitting == false"
                  >
                    <div class="flex flex-col items-start space-y-2">
                      <div
                        class="w-full px-1"
                        x-show="eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting === false"
                      >
                        <div class="w-full">
                          <label
                            class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                          >
                            Evaluation Issue Description
                          </label>
                          <textarea
                            placeholder="Masukkan Evaluation Issue Description"
                            rows="6"
                            type="text"
                            :class="[
                              'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                              eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription
                                ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                                : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                              'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                            ]"
                            x-model="eorIssueModelIssueDescription"
                          ></textarea>
                          <p
                            x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription"
                            x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription"
                            class="text-theme-xs text-error-500 mt-1.5"
                          ></p>
                        </div>

                        <div class="mt-5 mb-3">
                          <button
                            type="button"
                            @click="isOpenEorIssueEditFormIndex = null"
                            class="shadow-theme-xs mb-2 inline-flex w-full items-center gap-2 rounded-lg bg-red-600 px-4 py-3 text-sm font-medium text-white transition hover:bg-red-800 2xl:mb-0 2xl:w-auto"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <line x1="18" y1="6" x2="6" y2="18"></line>
                              <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                            Batal
                          </button>

                          <button
                            type="submit"
                            class="shadow-theme-xs bg-success-600 hover:bg-success-800 mb-2 inline-flex w-full items-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition 2xl:mb-0 2xl:w-auto"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <path
                                d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                              ></path>
                              <polyline
                                points="17 21 17 13 7 13 7 21"
                              ></polyline>
                              <polyline points="7 3 7 8 15 8"></polyline>
                            </svg>
                            Simpan EOR Issue
                          </button>
                        </div>

                        <div class="mb-3">
                          <div>
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Upload attachment (opsional)
                            </label>
                          </div>

                          <div class="mt-2">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Pilih file attachment
                            </label>

                            <div class="w-[275px]">
                              <input
                                type="file"
                                @click="eorIssueAttachmentModelFile = null; $event.target.value = null"
                                @change="eorIssueAttachmentModelFile = $event.target.files[0]"
                                placeholder="Pilih file"
                                class="focus:border-ring-brand-300 shadow-theme-xs focus:file:ring-brand-300 h-10 w-full overflow-hidden rounded-lg border border-gray-300 bg-transparent text-sm text-gray-500 transition-colors file:mr-5 file:border-collapse file:cursor-pointer file:rounded-l-lg file:border-0 file:border-r file:border-solid file:border-gray-200 file:bg-gray-50 file:py-3 file:pr-3 file:pl-3.5 file:text-xs file:text-gray-700 placeholder:text-gray-400 hover:file:bg-gray-100 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 dark:text-white/90 dark:file:border-gray-800 dark:file:bg-white/[0.03] dark:file:text-gray-400 dark:placeholder:text-gray-400"
                              />
                            </div>
                          </div>

                          <div class="mt-2">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Title
                            </label>
                            <input
                              type="text"
                              x-model="eorIssueAttachmentModelFileTitle"
                              placeholder="Masukkan Title untuk Attachment"
                              class="shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                            />
                          </div>

                          <div class="mt-2">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Description
                            </label>
                            <textarea
                              placeholder="Masukkan keterangan file attachment"
                              x-model="eorIssueAttachmentModelFileDescription"
                              rows="3"
                              class="shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                            ></textarea>
                          </div>

                          <button
                            type="button"
                            @click="addEorIssueAttachment()"
                            class="bg-brand-600 shadow-theme-xs hover:bg-brand-700 mt-2 inline-flex items-center gap-1.5 rounded-md px-3 py-2 text-xs font-medium text-white transition"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <path
                                d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2-2.4-3.5-4.4-3.5h-1.2c-.7-3-3.2-5.2-6.2-5.6-3-.3-5.9 1.3-7.3 4-1.2 2.5-1 6.5.5 8.8m8.7-1.6V21"
                              />
                              <path d="M16 16l-4-4-4 4" />
                            </svg>
                            Upload File Attachment
                          </button>
                        </div>
                        <template
                          x-for="(attachment, attachmentIndex) in eorIssues[index]?.eor_issue_attachments"
                          :key="attachmentIndex"
                        >
                          <div class="mt-1 w-full flex-1 space-y-2">
                            <div
                              class="rounded border border-gray-300 bg-gray-50 px-2 py-1.5 text-xs dark:border-gray-700 dark:bg-gray-800"
                            >
                              <div
                                class="flex items-center justify-between gap-2"
                              >
                                <p
                                  class="w-full truncate text-xs font-medium text-gray-900 dark:text-white"
                                  x-text="attachment?.title"
                                  title="File Title"
                                ></p>
                                <button
                                  type="button"
                                  x-show="!eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting"
                                  @click="deleteEorIssueAttachment(attachment.att_number)"
                                  class="flex shrink-0 items-center gap-1 rounded bg-red-600 px-2 py-1 text-[11px] font-medium text-white transition hover:bg-red-800"
                                >
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="#ffffff"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                  >
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path
                                      d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                                    ></path>
                                    <line
                                      x1="10"
                                      y1="11"
                                      x2="10"
                                      y2="17"
                                    ></line>
                                    <line
                                      x1="14"
                                      y1="11"
                                      x2="14"
                                      y2="17"
                                    ></line>
                                  </svg>
                                  Hapus
                                </button>
                              </div>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>
                  </template>
                </td>

                <td
                  class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
                >
                  <template
                    x-if="eorIssue.eor_issue_reviewer !== null && eorIssue.eor_issue_reviewer.eor_issue_review !== null"
                  >
                    <div>
                      <template x-if="isOpenEorIssueReviewFormIndex !== index">
                        <div class="flex flex-col items-start space-y-2">
                          <p
                            class="bg-success-50 text-theme-xs text-success-600 dark:bg-success-500/15 dark:text-success-500 rounded-full px-2 py-0.5 font-medium"
                            x-text="eorIssue.eor_issue_reviewer.toe_reviewer.reviewer.name + ' - ' + window.formatDateToString(eorIssue.eor_issue_reviewer.eor_issue_review.review_date)"
                          ></p>
                          <p
                            class="text-theme-sm font-medium text-gray-800 dark:text-white/90"
                            x-text="eorIssue.eor_issue_reviewer.eor_issue_review.reviewer_review"
                          ></p>

                          <template
                            x-for="(reviewAttachment, reviewAttachmentIndex) in eorIssues[index]?.eor_issue_reviewer?.eor_issue_review?.eor_issue_review_attachments"
                            :key="reviewAttachmentIndex"
                          >
                            <div class="mt-2 w-[280px] flex-1">
                              <label
                                class="mb-1.5 block text-sm font-medium text-gray-800 dark:text-white/90"
                                x-text="reviewAttachment?.title"
                              >
                              </label>

                              <img
                                x-show="reviewAttachment?.mime_type === 'image/png' || reviewAttachment?.mime_type === 'image/jpeg' "
                                :src="window.apiHost + '/uploads/eor_issue_review_attachment/' + reviewAttachment?.file_uuid"
                                alt="Cover"
                                class="w-full rounded-sm border border-gray-200 dark:border-gray-800"
                              />
                              <a
                                x-show="reviewAttachment?.mime_type !== 'image/png' && reviewAttachment?.mime_type !== 'image/jpeg' "
                                :href="window.apiHost + '/uploads/eor_issue_review_attachment/' + reviewAttachment?.file_uuid"
                                target="_blank"
                                rel="noopener noreferrer"
                                class="text-brand-600 text-theme-sm hover:underline"
                              >
                                Buka Attachment
                              </a>
                              <p
                                class="text-theme-sm mt-1 text-gray-800 dark:text-white/90"
                                x-text="reviewAttachment?.description"
                              ></p>
                            </div>
                          </template>
                          <button
                            type="button"
                            class="bg-brand-600 shadow-theme-xs hover:bg-brand-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                            x-show="(reviewerData.id == eorIssue.eor_issue_reviewer.toe_reviewer.reviewer.id) && isOpenEorIssueAddForm === false && isOpenEorIssueEditFormIndex === null && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
                            @click="openEorIssueReviewForm(index)"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <path
                                d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"
                              ></path>
                              <polygon
                                points="18 2 22 6 12 16 8 16 8 12 18 2"
                              ></polygon>
                            </svg>
                            Edit EOR Issue Review
                          </button>
                        </div>
                      </template>
                      <template x-if="isOpenEorIssueReviewFormIndex === index">
                        <div class="flex flex-col items-start space-y-2">
                          <div class="w-full px-1">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Auditor Review
                            </label>
                            <textarea
                              placeholder="Masukkan Auditor Review"
                              rows="6"
                              type="text"
                              :class="[
                              'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                              eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview
                                ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                                : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                              'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                            ]"
                              x-model="eorIssueReviewModelAuditorReview"
                            ></textarea>
                            <p
                              x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview"
                              x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview"
                              class="text-theme-xs text-error-500 mt-1.5"
                            ></p>
                            <div class="mt-5 mb-3">
                              <button
                                type="button"
                                @click="isOpenEorIssueReviewFormIndex = null"
                                class="shadow-theme-xs mb-2 inline-flex w-full items-center gap-2 rounded-lg bg-red-600 px-4 py-3 text-sm font-medium text-white transition hover:bg-red-800 2xl:mb-0 2xl:w-auto"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="16"
                                  height="16"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="#ffffff"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <line x1="18" y1="6" x2="6" y2="18"></line>
                                  <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                                Batal
                              </button>

                              <button
                                type="submit"
                                class="shadow-theme-xs bg-success-600 hover:bg-success-800 mb-2 inline-flex w-full items-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition 2xl:mb-0 2xl:w-auto"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="16"
                                  height="16"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="#ffffff"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <path
                                    d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                                  ></path>
                                  <polyline
                                    points="17 21 17 13 7 13 7 21"
                                  ></polyline>
                                  <polyline points="7 3 7 8 15 8"></polyline>
                                </svg>
                                Simpan Review
                              </button>
                            </div>
                            <div class="mb-3">
                              <div>
                                <label
                                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                                >
                                  Upload attachment (opsional)
                                </label>
                              </div>

                              <div class="mt-2">
                                <label
                                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                                >
                                  Pilih file attachment
                                </label>

                                <div class="w-[275px]">
                                  <input
                                    type="file"
                                    @click="eorIssueReviewAttachmentModelFile = null; $event.target.value = null"
                                    @change="eorIssueReviewAttachmentModelFile = $event.target.files[0]"
                                    placeholder="Pilih file"
                                    class="focus:border-ring-brand-300 shadow-theme-xs focus:file:ring-brand-300 h-10 w-full overflow-hidden rounded-lg border border-gray-300 bg-transparent text-sm text-gray-500 transition-colors file:mr-5 file:border-collapse file:cursor-pointer file:rounded-l-lg file:border-0 file:border-r file:border-solid file:border-gray-200 file:bg-gray-50 file:py-3 file:pr-3 file:pl-3.5 file:text-xs file:text-gray-700 placeholder:text-gray-400 hover:file:bg-gray-100 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-gray-400 dark:text-white/90 dark:file:border-gray-800 dark:file:bg-white/[0.03] dark:file:text-gray-400 dark:placeholder:text-gray-400"
                                  />
                                </div>
                              </div>

                              <div class="mt-2">
                                <label
                                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                                >
                                  Title
                                </label>
                                <input
                                  type="text"
                                  x-model="eorIssueReviewAttachmentModelFileTitle"
                                  placeholder="Masukkan Title untuk Attachment"
                                  class="shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                                />
                              </div>

                              <div class="mt-2">
                                <label
                                  class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                                >
                                  Description
                                </label>
                                <textarea
                                  placeholder="Masukkan keterangan file attachment"
                                  x-model="eorIssueReviewAttachmentModelFileDescription"
                                  rows="3"
                                  class="shadow-theme-xs focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-sm text-gray-800 placeholder:text-gray-400 focus:ring-3 focus:outline-hidden dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30"
                                ></textarea>
                              </div>

                              <button
                                type="button"
                                @click="addEorIssueReviewAttachment()"
                                class="bg-brand-600 shadow-theme-xs hover:bg-brand-700 mt-2 inline-flex items-center gap-1.5 rounded-md px-3 py-2 text-xs font-medium text-white transition"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="16"
                                  height="16"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="#ffffff"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <path
                                    d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2-2.4-3.5-4.4-3.5h-1.2c-.7-3-3.2-5.2-6.2-5.6-3-.3-5.9 1.3-7.3 4-1.2 2.5-1 6.5.5 8.8m8.7-1.6V21"
                                  />
                                  <path d="M16 16l-4-4-4 4" />
                                </svg>
                                Upload File Attachment
                              </button>
                            </div>
                            <template
                              x-for="(reviewAttachment, reviewAttachmentIndex) in eorIssues[index]?.eor_issue_reviewer?.eor_issue_review?.eor_issue_review_attachments"
                              :key="reviewAttachmentIndex"
                            >
                              <div class="mt-1 w-full flex-1 space-y-2">
                                <div
                                  class="rounded border border-gray-300 bg-gray-50 px-2 py-1.5 text-xs dark:border-gray-700 dark:bg-gray-800"
                                >
                                  <div
                                    class="flex items-center justify-between gap-2"
                                  >
                                    <p
                                      class="w-full truncate text-xs font-medium text-gray-900 dark:text-white"
                                      x-text="reviewAttachment?.title"
                                      title="File Title"
                                    ></p>
                                    <button
                                      type="button"
                                      x-show="!eorIssueAttachmentAndEorIssueReviewAttachmentFormSubmitting"
                                      @click="deleteEorIssueReviewAttachment(reviewAttachment.att_number)"
                                      class="flex shrink-0 items-center gap-1 rounded bg-red-600 px-2 py-1 text-[11px] font-medium text-white transition hover:bg-red-800"
                                    >
                                      <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="16"
                                        height="16"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="#ffffff"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                      >
                                        <polyline
                                          points="3 6 5 6 21 6"
                                        ></polyline>
                                        <path
                                          d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                                        ></path>
                                        <line
                                          x1="10"
                                          y1="11"
                                          x2="10"
                                          y2="17"
                                        ></line>
                                        <line
                                          x1="14"
                                          y1="11"
                                          x2="14"
                                          y2="17"
                                        ></line>
                                      </svg>
                                      Hapus
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </template>
                          </div>
                        </div>
                      </template>
                    </div>
                  </template>

                  <template
                    x-if="eorIssue.eor_issue_reviewer !== null && eorIssue.eor_issue_reviewer.eor_issue_review === null"
                  >
                    <div>
                      <template x-if="isOpenEorIssueReviewFormIndex !== index">
                        <div class="flex flex-col items-start space-y-2">
                          <div
                            class="bg-success-50 text-theme-xs text-success-600 dark:bg-success-500/15 dark:text-success-500 rounded-full px-2 py-0.5 font-medium"
                            x-text="eorIssue.eor_issue_reviewer.toe_reviewer.reviewer.name"
                          ></div>
                          <button
                            type="button"
                            class="bg-success-600 shadow-theme-xs hover:bg-success-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                            x-show="(reviewerData.id == eorIssue.eor_issue_reviewer.toe_reviewer.reviewer.id) && isOpenEorIssueAddForm === false && isOpenEorIssueEditFormIndex === null && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
                            @click="openEorIssueReviewForm(index)"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <line x1="12" y1="5" x2="12" y2="19"></line>
                              <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Buat EOR Issue Review
                          </button>
                        </div>
                      </template>
                      <template x-if="isOpenEorIssueReviewFormIndex === index">
                        <div class="flex flex-col items-start space-y-2">
                          <div class="w-full px-1">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Auditor Review
                            </label>
                            <textarea
                              placeholder="Masukkan Auditor Review"
                              rows="6"
                              type="text"
                              :class="[
                              'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                              eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview
                                ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                                : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                              'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                            ]"
                              x-model="eorIssueReviewModelAuditorReview"
                            ></textarea>
                            <p
                              x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview"
                              x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelAuditorReview"
                              class="text-theme-xs text-error-500 mt-1.5"
                            ></p>
                            <div class="mt-5 mb-3">
                              <button
                                type="button"
                                @click="isOpenEorIssueReviewFormIndex = null"
                                class="shadow-theme-xs mb-2 inline-flex w-full items-center gap-2 rounded-lg bg-red-600 px-4 py-3 text-sm font-medium text-white transition hover:bg-red-800 2xl:mb-0 2xl:w-auto"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="16"
                                  height="16"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="#ffffff"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <line x1="18" y1="6" x2="6" y2="18"></line>
                                  <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                                Batal
                              </button>

                              <button
                                type="submit"
                                class="shadow-theme-xs bg-success-600 hover:bg-success-800 mb-2 inline-flex w-full items-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition 2xl:mb-0 2xl:w-auto"
                              >
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="16"
                                  height="16"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                  stroke="#ffffff"
                                  stroke-width="2"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                >
                                  <path
                                    d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                                  ></path>
                                  <polyline
                                    points="17 21 17 13 7 13 7 21"
                                  ></polyline>
                                  <polyline points="7 3 7 8 15 8"></polyline>
                                </svg>
                                Simpan Review
                              </button>
                            </div>
                          </div>
                        </div>
                      </template>
                    </div>
                  </template>

                  <template x-if="eorIssue.eor_issue_reviewer === null">
                    <div>
                      <template
                        x-if="isOpenEorIssueAssignReviewerFormIndex !== index"
                      >
                        <div class="flex flex-col items-start space-y-2">
                          <button
                            type="button"
                            class="bg-warning-600 shadow-theme-xs hover:bg-warning-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                            x-show="((checkReviewerAssignmentPrivilege() === 'Admin') || (checkReviewerAssignmentPrivilege() === 'Lead Auditor')) && isOpenEorIssueAddForm === false && isOpenEorIssueEditFormIndex === null && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
                            @click="openEorIssueAssignReviewerForm(index)"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="16"
                              height="16"
                              viewBox="0 0 24 24"
                              fill="none"
                              stroke="#ffffff"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            >
                              <path
                                d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                              ></path>
                              <circle cx="8.5" cy="7" r="4"></circle>
                              <polyline points="17 11 19 13 23 9"></polyline>
                            </svg>
                            <span
                              x-text="`${checkReviewerAssignmentPrivilege()}: Tentukan EOR Issue Reviewer`"
                            ></span>
                          </button>
                        </div>
                      </template>
                      <template
                        x-if="isOpenEorIssueAssignReviewerFormIndex === index"
                      >
                        <div class="flex flex-col items-start space-y-2">
                          <div class="w-full px-1">
                            <label
                              class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                            >
                              Auditor untuk EOR Issue Review
                            </label>
                            <div class="relative z-20 bg-transparent">
                              <select
                                class="w-full appearance-none rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:ring-gray-500/10 focus:outline-none dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"
                                x-model="eorIssueReviewerModelId"
                              >
                                <option
                                  value="-1"
                                  disabled
                                  selected
                                  hidden
                                  class="text-gray-700 dark:bg-gray-900 dark:text-gray-400"
                                >
                                  Pilih Auditor
                                </option>
                                <template
                                  x-for="(reviewer, reviewerIndex) in toe?.reviewers"
                                  :key="reviewerIndex"
                                >
                                  <option
                                    :value="reviewer.id"
                                    class="text-gray-700 dark:bg-gray-900 dark:text-gray-400"
                                    x-text="reviewer.name"
                                  ></option>
                                </template>
                              </select>
                              <span
                                class="pointer-events-none absolute top-1/2 right-4 z-30 -translate-y-1/2 text-gray-500 dark:text-gray-400"
                              >
                                <svg
                                  class="stroke-current"
                                  width="20"
                                  height="20"
                                  viewBox="0 0 20 20"
                                  fill="none"
                                  xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path
                                    d="M4.79175 7.396L10.0001 12.6043L15.2084 7.396"
                                    stroke=""
                                    stroke-width="1.5"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                  />
                                </svg>
                              </span>
                            </div>
                          </div>

                          <div class="mt-1">
                            <button
                              type="button"
                              class="shadow-theme-xs inline-flex items-center gap-1.5 rounded-md bg-red-600 px-2.5 py-2 text-xs font-medium text-white transition hover:bg-red-800"
                              @click="isOpenEorIssueAssignReviewerFormIndex = null"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="#ffffff"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              >
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                              </svg>
                              Batal
                            </button>
                            <button
                              type="button"
                              class="bg-warning-600 shadow-theme-xs hover:bg-warning-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                              @click="addEorIssueReviewer(eorIssue.id)"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="#ffffff"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              >
                                <path
                                  d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                                ></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <polyline points="17 11 19 13 23 9"></polyline>
                              </svg>
                              Tentukan
                            </button>
                          </div>
                        </div>
                      </template>
                    </div>
                  </template>
                </td>

                <td
                  class="w-[40px] flex-1 border border-gray-200 py-2 dark:border-gray-700"
                >
                  <div class="flex items-start justify-center">
                    <template x-if="isOpenEorIssueReviewFormIndex !== index">
                      <div class="flex flex-col items-start space-y-2">
                        <p
                          class="text-theme-sm font-medium text-gray-800 dark:text-white/90"
                          x-show="eorIssue.eor_issue_reviewer !== null && eorIssue.eor_issue_reviewer.eor_issue_review !== null"
                          x-text="eorIssue.eor_issue_reviewer?.eor_issue_review?.status === true ? '✅' : '❌'"
                        ></p>
                      </div>
                    </template>
                    <template x-if="isOpenEorIssueReviewFormIndex === index">
                      <div class="flex flex-col items-start space-y-2">
                        <div>
                          <label
                            class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                          >
                            Status
                          </label>
                          <div class="relative z-20 bg-transparent">
                            <select
                              x-model="eorIssueReviewModelStatus"
                              class="w-full appearance-none rounded-lg py-2.5 text-sm focus:outline-none"
                              :class="[
                            eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelStatus ? 'border border-red-500 focus:ring-red-500/10' : 'border border-gray-300 focus:ring-gray-500/10',
                            'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700'
                          ]"
                            >
                              <option
                                value=""
                                disabled
                                hidden
                                class="text-gray-700 dark:bg-gray-900 dark:text-gray-400"
                              >
                                ?
                              </option>
                              <option
                                value="true"
                                class="text-gray-700 dark:bg-gray-900 dark:text-gray-400"
                              >
                                ✅
                              </option>
                              <option
                                value="false"
                                class="text-gray-700 dark:bg-gray-900 dark:text-gray-400"
                              >
                                ❌
                              </option>
                            </select>
                            <span
                              class="pointer-events-none absolute top-1/2 right-1 z-30 -translate-y-1/2 text-gray-500 dark:text-gray-400"
                            >
                              <svg
                                class="stroke-current"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                              >
                                <path
                                  d="M4.79175 7.396L10.0001 12.6043L15.2084 7.396"
                                  stroke=""
                                  stroke-width="1.5"
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                />
                              </svg>
                            </span>
                          </div>
                          <p
                            x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelStatus"
                            class="mt-1.5 text-xs text-red-500"
                            x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueReviewModelStatus"
                          ></p>
                        </div>
                      </div>
                    </template>
                  </div>
                </td>
              </tr>
            </template>
          </template>

          <template x-if="!isOpenEorIssueAddForm">
            <tr
              class="align-top"
              x-show="isOpenEorIssueEditFormIndex === null && isOpenEorIssueReviewFormIndex === null && isOpenEorIssueAssignReviewerFormIndex == null"
            >
              <td
                colspan="6"
                class="border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <div class="flex flex-col items-start space-y-2">
                  <button
                    type="button"
                    @click="openEorIssueAddForm()"
                    class="bg-success-600 shadow-theme-xs hover:bg-success-800 inline-flex items-center gap-1.5 rounded-md px-2.5 py-2 text-xs font-medium text-white transition"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="#ffffff"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <line x1="12" y1="5" x2="12" y2="19"></line>
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Tambah EOR Issue
                  </button>
                </div>
              </td>
            </tr>
          </template>

          <template x-if="isOpenEorIssueAddForm">
            <tr class="align-top">
              <td
                class="w-[40px] border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <div class="flex items-start justify-center">
                  <p class="text-theme-sm text-gray-500 dark:text-gray-400"></p>
                </div>
              </td>
              <td
                class="w-[120px] min-w-[120px] border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <div class="flex items-start">
                  <div class="w-full px-1">
                    <label
                      class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                    >
                      CC Components Element
                    </label>
                    <input
                      type="text"
                      x-model="eorIssueModelCcComponents"
                      placeholder="Masukkan CC Components Element"
                      :class="[
                        'w-full rounded-lg px-4 py-2.5 text-sm focus:outline-none',
                        eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents ? 'border border-red-500 focus:ring-red-500/10' : 'border border-gray-300 focus:ring-gray-500/10',
                        'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700'
                      ]"
                    />
                    <p
                      x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents"
                      x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelCcComponents"
                      class="text-theme-xs text-error-500 mt-1.5"
                    ></p>
                  </div>
                </div>
              </td>
              <td
                class="w-[160px] min-w-[160px] border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <div class="flex flex-col items-start space-y-2">
                  <div class="w-full px-1">
                    <label
                      class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                    >
                      Evaluation Reference
                    </label>
                    <textarea
                      placeholder="Masukkan Evaluation Reference"
                      rows="6"
                      type="text"
                      :class="[
                              'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                              eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference
                                ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                                : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                              'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                            ]"
                      x-model="eorIssueModelEvaluationReference"
                    ></textarea>
                    <p
                      x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference"
                      x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelEvaluationReference"
                      class="text-theme-xs text-error-500 mt-1.5"
                    ></p>
                  </div>
                </div>
              </td>
              <td
                class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <div class="flex flex-col items-start space-y-2">
                  <div class="w-full px-1">
                    <div class="w-full">
                      <label
                        class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"
                      >
                        Evaluation Issue Description
                      </label>
                      <textarea
                        placeholder="Masukkan Evaluation Issue Description"
                        rows="6"
                        type="text"
                        :class="[
                              'w-full rounded-lg px-4 py-2.5 text-sm shadow-theme-xs bg-transparent focus:outline-none',
                              eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription
                                ? 'border border-red-500 focus:border-red-500 focus:ring-red-500/10' 
                                : 'border border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:focus:border-brand-800',
                              'dark:bg-gray-900 dark:text-white/90 dark:border-gray-700 placeholder:text-gray-400 dark:placeholder:text-white/30'
                            ]"
                        x-model="eorIssueModelIssueDescription"
                      ></textarea>
                      <p
                        x-show="eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription"
                        x-text="eorIssueAndEorIssueReviewFormErrors.eorIssueModelIssueDescription"
                        class="text-theme-xs text-error-500 mt-1.5"
                      ></p>
                    </div>

                    <div class="mt-5 mb-3">
                      <button
                        type="button"
                        @click="isOpenEorIssueAddForm = false"
                        class="shadow-theme-xs mb-2 inline-flex w-full items-center gap-2 rounded-lg bg-red-600 px-4 py-3 text-sm font-medium text-white transition hover:bg-red-800 2xl:mb-0 2xl:w-auto"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="#ffffff"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <line x1="18" y1="6" x2="6" y2="18"></line>
                          <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                        Batal
                      </button>

                      <button
                        type="submit"
                        class="shadow-theme-xs bg-success-600 hover:bg-success-800 mb-2 inline-flex w-full items-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition 2xl:mb-0 2xl:w-auto"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="#ffffff"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <line x1="12" y1="5" x2="12" y2="19"></line>
                          <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Tambahkan EOR Issue
                      </button>
                    </div>
                  </div>
                </div>
              </td>
              <td
                class="min-w-[300px] flex-1 border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <p></p>
              </td>
              <td
                class="w-[40px] border border-gray-200 px-2 py-2 dark:border-gray-700"
              >
                <p></p>
              </td>
            </tr>
          </template>
        </tbody>
      </table>
    </form>
  </div>
</div>

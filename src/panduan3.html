<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie-edge" />
    <title>Panduan 3 | LSPro BSSN</title>

    <!-- Anti-flicker script -->
    <script>
      if (
        localStorage.getItem("darkMode") === "true" ||
        (!("darkMode" in localStorage) &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>

    <style>
      [x-cloak] {
        display: none !important;
      }
    </style>

    <!-- Include Alpine.js -->
    <script
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
      defer
    ></script>

    <script defer>
      // Mock login check for standalone functionality
      if (typeof window.isLoggedIn === "undefined") {
        window.isLoggedIn = () => true; // Assume logged in for this example
      }

      document.addEventListener("alpine:init", () => {
        Alpine.data("panduanPagesInit", () => ({
          // ===== Main Page State =====
          page: "panduan3",
          darkMode: JSON.parse(localStorage.getItem("darkMode")) || false,
          sidebarToggle:
            JSON.parse(localStorage.getItem("sidebarToggle")) || false,
          token: null,
          reviewerData: null,
          
          // ===== Modal States for Roadmap =====
          isPengesahanModalOpen: false,
          isPemberitahuan1ModalOpen: false,
          isPelaksanaanModalOpen: false,
          isKeputusanModalOpen: false,
          isPemberitahuan2ModalOpen: false,

          // ===== Merged State from header.html =====
          menuToggle: false,
          isOpenUserModal: false,
          userFormModelOldPassword: "",
          userFormModelNewPassword: "",
          userFormErrors: {},

          // ===== Initialization =====
          init() {
            // Persist theme and sidebar state
            this.$watch("darkMode", (value) => {
              localStorage.setItem("darkMode", JSON.stringify(value));
              if (value) {
                document.documentElement.classList.add("dark");
              } else {
                document.documentElement.classList.remove("dark");
              }
            });
            this.$watch("sidebarToggle", (value) =>
              localStorage.setItem("sidebarToggle", JSON.stringify(value)),
            );

            // Check login and load user data
            if (window.isLoggedIn()) {
              this.token = localStorage.getItem("token");
              this.reviewerData = JSON.parse(localStorage.getItem("reviewer"));
            } else {
              window.location.href = "/login.html";
            }
          },

          // ===== Merged Methods from header.html =====
          openUserFormModal() {
            this.userFormErrors = {};
            this.userFormModelOldPassword = "";
            this.userFormModelNewPassword = "";
            this.isOpenUserModal = true;
          },

          closeUserFormModal() {
            this.isOpenUserModal = false;
          },

          async userFormSubmitForm() {
            // This function would contain the password change logic
          },
        }));
      });
    </script>
  </head>
  <body
    x-data="panduanPagesInit"
    class="bg-gray-50 dark:bg-gray-900"
  >
    <!-- ===== Page Wrapper Start ===== -->
    <div class="flex h-screen overflow-hidden">
      <!-- ===== Sidebar Start ===== -->
      <include src="./partials/sidebar.html"></include>
      <!-- ===== Sidebar End ===== -->

      <!-- ===== Content Area Start ===== -->
      <div
        class="relative flex flex-1 flex-col overflow-x-hidden overflow-y-auto"
      >
        <!-- ===== Header Start ===== -->
        <include src="./partials/header.html" />
        <!-- ===== Header End ===== -->

        <!-- ===== Main Content Start ===== -->
        <main>
          <div class="mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10">
            
            <!-- ====== Roadmap Section Start ====== -->
            <div
              class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-gray-800"
            >
              <h2 class="mb-8 text-center text-2xl font-semibold text-gray-800 dark:text-white/90">
                Proses Surveillance
              </h2>

              <div class="container mx-auto w-full h-full">
                <div class="relative wrap overflow-hidden p-10 h-full">
                  <!-- Vertical dotted line -->
                  <div class="absolute border-2-2 border-dotted border-gray-300 dark:border-gray-600 h-full border" style="left: 50%"></div>
                  
                  <!-- Start Node -->
                  <div class="mb-8 flex justify-center items-center w-full relative">
                     <div @click="isPengesahanModalOpen = true" class="z-10 flex flex-col items-center cursor-pointer group">
                         <div class="flex items-center justify-center h-24 w-24 rounded-full bg-yellow-400 text-white ring-8 ring-white dark:ring-gray-800 transition-transform duration-200 group-hover:scale-110">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                              </svg>
                         </div>
                         <h3 class="mt-4 text-xl font-bold text-gray-800 dark:text-white/90">Surveilans</h3>
                     </div>
                     <!-- "Click Me" Image Container -->
                     <div class="absolute top-0 animate-bounce z-0" style="left: calc(50% + 60px);">
                        <img src="./images/click-me.png" alt="Click Me Arrow" class="w-32 h-auto" onerror="this.src='https://placehold.co/64x64/png/transparent/000000?text=Click!'; this.onerror=null;">
                     </div>
                  </div>

                  <!-- Roadmap Item 1 -->
                  <div class="my-16 flex justify-center items-center w-full">
                     <div @click="isPemberitahuan1ModalOpen = true" class="z-10 flex flex-col items-center cursor-pointer group">
                        <div class="absolute text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 -mt-12"> </div>
                         <div class="flex items-center justify-center h-20 w-20 rounded-full bg-teal-500 text-white ring-8 ring-white dark:ring-gray-800 transition-transform duration-200 group-hover:scale-110 relative">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                              </svg>
                              <span class="absolute -bottom-2 -right-2 h-6 w-6 rounded-full bg-gray-700 text-white text-sm flex items-center justify-center">1</span>
                         </div>
                         <h3 class="mt-4 text-lg font-bold text-gray-800 dark:text-white/90">Terima Pemberitahuan Surveilans</h3>
                         <p class="text-center text-sm text-gray-600 dark:text-gray-400">LSPro akan mengirimkan pemberitahuan.</p>
                     </div>
                  </div>

                   <!-- Roadmap Item 2 -->
                  <div class="my-16 flex justify-center items-center w-full">
                     <div @click="isPelaksanaanModalOpen = true" class="z-10 flex flex-col items-center cursor-pointer group">
                        <div class="absolute text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 -mt-12"></div>
                         <div class="flex items-center justify-center h-20 w-20 rounded-full bg-blue-500 text-white ring-8 ring-white dark:ring-gray-800 transition-transform duration-200 group-hover:scale-110 relative">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                              </svg>
                         </div>
                         <h3 class="mt-4 text-lg font-bold text-gray-800 dark:text-white/90">Pelaksanaan Kegiatan Surveilans</h3>
                         <p class="text-center text-sm text-gray-600 dark:text-gray-400">Tim Surveilans melaksanakan rangkaian kegiatan.</p>
                     </div>
                  </div>

                  <!-- Roadmap Item 3 -->
                  <div class="my-16 flex justify-center items-center w-full">
                     <div @click="isKeputusanModalOpen = true" class="z-10 flex flex-col items-center cursor-pointer group">
                         <div class="flex items-center justify-center h-20 w-20 rounded-full bg-purple-500 text-white ring-8 ring-white dark:ring-gray-800 transition-transform duration-200 group-hover:scale-110 relative">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                              </svg>
                         </div>
                         <h3 class="mt-4 text-lg font-bold text-gray-800 dark:text-white/90">Keputusan hasil surveilans</h3>
                         <p class="text-center text-sm text-gray-600 dark:text-gray-400">Pihak BSSN akan melaporkan keputusan.</p>
                     </div>
                  </div>

                   <!-- Roadmap Item 4 -->
                  <div class="my-16 flex justify-center items-center w-full">
                     <div @click="isPemberitahuan2ModalOpen = true" class="z-10 flex flex-col items-center cursor-pointer group">
                        <div class="absolute text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 -mt-12">Bulan ke-40 sampai 44</div>
                         <div class="flex items-center justify-center h-20 w-20 rounded-full bg-teal-500 text-white ring-8 ring-white dark:ring-gray-800 transition-transform duration-200 group-hover:scale-110 relative">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                              </svg>
                              <span class="absolute -bottom-2 -right-2 h-6 w-6 rounded-full bg-gray-700 text-white text-sm flex items-center justify-center">2</span>
                         </div>
                         <h3 class="mt-4 text-lg font-bold text-gray-800 dark:text-white/90">Terima Pemberitahuan Surveilans ke-2</h3>
                         <p class="text-center text-sm text-gray-600 dark:text-gray-400">LSPro akan mengirimkan pemberitahuan.</p>
                     </div>
                  </div>

                </div>
              </div>
            </div>
            <!-- ====== Roadmap Section End ====== -->

          </div>
        </main>
        <!-- ===== Main Content End ===== -->
      </div>
      <!-- ===== Content Area End ===== -->
    </div>
    <!-- ===== Page Wrapper End ===== -->

    <!-- ===== Modals Start ===== -->
    <div x-show="isPengesahanModalOpen" x-cloak @keydown.escape.window="isPengesahanModalOpen = false" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-5 transition-opacity">
      <div @click.outside="isPengesahanModalOpen = false" class="w-full max-w-2xl transform rounded-2xl bg-white p-6 shadow-xl transition-all dark:bg-gray-800">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white/90">Surveilans</h3>
        <p class="mt-4 text-gray-600 dark:text-gray-400">
          Pengawasan terhadap produk yang sudah tersertifikasi dilakukan oleh LSPro melalui kegiatan surveilans paling sedikit 2 kali dalam periode masa berlaku sertifikat dengan jarak antara surveilans paling sedikit 18 bulan
        </p>
      </div>
    </div>
    <div x-show="isPemberitahuan1ModalOpen" x-cloak @keydown.escape.window="isPemberitahuan1ModalOpen = false" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-5 transition-opacity">
      <div @click.outside="isPemberitahuan1ModalOpen = false" class="w-full max-w-2xl transform rounded-2xl bg-white p-6 shadow-xl transition-all dark:bg-gray-800">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white/90">Terima Pemberitahuan Surveilans</h3>
        <p class="mt-4 text-gray-600 dark:text-gray-400">LSPro akan mengirimkan surat pemberitahuan kepada pemegang sertifikat terkait jadwal dan persyaratan surveillance pertama. Surveilans pertama dilakukan pada bulan 20 sampai dengan 24.<br>
          <ul class="mt-4 text-gray-600 dark:text-gray-400 list-[upper-alpha] list-inside mt-2">
          <li>Jika Sponsor/Developer tidak menyetujui kegiatan Surveilans, maka LSPro mengirimkan Formulir Surat Pernyataan Tidak Menyetujui adanya Surveilans kepada Sponsor/Developer. </li>
          <li>Jika LSPro sudah menerima Surat Pernyataan tersebut maka LSPro dapat melakukan Pembekuan dan Pencabutan Sertifikat.</li>
          </ul>
        </p>
      </div>
    </div>
    <div x-show="isPelaksanaanModalOpen" x-cloak @keydown.escape.window="isPelaksanaanModalOpen = false" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-5 transition-opacity">
      <div @click.outside="isPelaksanaanModalOpen = false" class="w-full max-w-2xl transform rounded-2xl bg-white p-6 shadow-xl transition-all dark:bg-gray-800">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white/90">Pelaksanaan Kegiatan Surveilans</h3>
        <p class="mt-4 text-gray-600 dark:text-gray-400">Surveilans dilakukan melalui audit proses produksi dan/atau pengujian produk. Tim Surveilans melaksanakan rangkaian program kegiatan surveilans terhadap perangkat keamanan siber dan sandi, dengan masa kerja selama 30 hari kerja.</p>
      </div>
    </div>
     <div x-show="isKeputusanModalOpen" x-cloak @keydown.escape.window="isKeputusanModalOpen = false" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-5 transition-opacity">
      <div @click.outside="isKeputusanModalOpen = false" class="w-full max-w-2xl transform rounded-2xl bg-white p-6 shadow-xl transition-all dark:bg-gray-800">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white/90">Keputusan hasil surveilans</h3>
        <p class="mt-4 text-gray-600 dark:text-gray-400">Pihak BSSN akan melaporkan keputusan hasil surveilans yang dapat berupa pengurangan lingkup sertifikasi, pembekuan dan sertifikasi ulang.</p>
      </div>
    </div>
    <div x-show="isPemberitahuan2ModalOpen" x-cloak @keydown.escape.window="isPemberitahuan2ModalOpen = false" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-5 transition-opacity">
      <div @click.outside="isPemberitahuan2ModalOpen = false" class="w-full max-w-2xl transform rounded-2xl bg-white p-6 shadow-xl transition-all dark:bg-gray-800">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white/90">Terima Pemberitahuan Surveilans ke-2</h3>
        <p class="mt-4 text-gray-600 dark:text-gray-400">LSPro akan mengirimkan pemberitahuan kepada pemegang sertifikat terkait jadwal dan persyaratan surveillance kedua, yang dijadwalkan antara bulan ke-40 dan ke-44 dari tanggal pengesahan sertifikat.<br><br>Dalam hal sertifikasi yang telah habis masa berlakunya, Pemohon dapat mengajukan permohonan sertifikasi ulang maksimal 9 (sembilan) bulan sebelum masa berlakunya habis.</p>
      </div>
    </div>
    <!-- ===== Modals End ===== -->
  </body>
</html>

